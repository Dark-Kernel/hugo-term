<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>Shell Scripting :: Dark Kernel</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Shell provides an interface between the user and the kernel and executes programs called commands." />
<meta name="keywords" content="" />

  <meta name="robots" content="noodp" />

<link rel="canonical" href="https://dark-kernel.web.app/notes/2-notes/2023-07-23-shell-scripting/" />






  
  
  
  
  
  <link rel="stylesheet" href="https://dark-kernel.web.app/styles.css">







  <link rel="shortcut icon" href="https://dark-kernel.web.app/profile.jpg">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Shell Scripting">
<meta property="og:description" content="Shell provides an interface between the user and the kernel and executes programs called commands." />
<meta property="og:url" content="https://dark-kernel.web.app/notes/2-notes/2023-07-23-shell-scripting/" />
<meta property="og:site_name" content="Dark Kernel" />

  
    <meta property="og:image" content="https://dark-kernel.web.app/profile.jpg">
  

<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="627">


  <meta property="article:published_time" content="2023-07-23 00:00:00 &#43;0000 UTC" />












</head>
<body class="green">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="/">
  <div class="logo">
    Sumit Patel
  </div>
</a>

    </div>
    
      <ul class="menu menu--mobile">
  <li class="menu__trigger">Menu&nbsp;▾</li>
  <li>
    <ul class="menu__dropdown">
      
        
          <li><a href="/about/">About</a></li>
        
      
        
          <li><a href="/notes">Notes</a></li>
        
      
        
          <li><a href="/post">Post</a></li>
        
      
        
          <li><a href="/showcase">Showcase</a></li>
        
      
      
    </ul>
  </li>
</ul>

    
    
  </div>
  
    <nav class="navigation-menu">
  <ul class="navigation-menu__inner menu--desktop">
    
      
        
          <li><a href="/about/" >About</a></li>
        
      
        
          <li><a href="/notes" >Notes</a></li>
        
      
        
          <li><a href="/post" >Post</a></li>
        
      
      
        <li>
          <ul class="menu">
            <li class="menu__trigger">Show more&nbsp;▾</li>
            <li>
              <ul class="menu__dropdown">
                
                  
                    <li><a href="/showcase" >Showcase</a></li>
                  
                
              </ul>
            </li>
          </ul>
        </li>
      
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<article class="post">
  <h1 class="post-title">
    <a href="https://dark-kernel.web.app/notes/2-notes/2023-07-23-shell-scripting/">Shell Scripting</a>
  </h1>
  <div class="post-meta"><time class="post-date">2023-07-23</time><span class="post-author">Sumit Patel</span></div>

  
    <span class="post-tags">
      
      #<a href="https://dark-kernel.web.app/tags/shell/">shell</a>&nbsp;
      
      #<a href="https://dark-kernel.web.app/tags/bash/">bash</a>&nbsp;
      
    </span>
  
  


  

  <div class="post-content"><div>
        <p>Shell provides an interface between the user and the kernel and executes programs called commands.</p>
<p>Different shells:</p>
<ul>
<li>sh  =&gt; Bourne shell</li>
<li>ksh =&gt; korn shell [&ndash;more&ndash;]</li>
<li>bash =&gt; Bourne again shell</li>
<li>csh =&gt; c shell</li>
<li>zsh = z shell</li>
</ul>
<p>Most popular one is <code>Bash</code> and it is used in shell scripting.</p>
<h4 id="script-file">Script File<a href="#script-file" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<ol>
<li>
<p>Shell script file should end with <code>.sh</code> or it should have shebang <code>#!</code>.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Hello world&#34;</span>
</span></span></code></pre></div><p>Shebang defines the interpreter to use to interpret the script.</p>
</li>
<li>
<p>Script is exectued line by line.</p>
</li>
<li>
<p>It also have programming concepts like conditional statement, loops, etc.</p>
</li>
<li>
<p>To execute the script you can use either ways</p>
<ol>
<li>
<p>Make it executable and execute like binary</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x script.sh
</span></span><span style="display:flex;"><span>./script.sh
</span></span></code></pre></div></li>
<li>
<p>Execute directly using interpreter</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>bash script.sh
</span></span></code></pre></div></li>
</ol>
</li>
</ol>
<hr>
<p> </p>
<ul>
<li>
<h4 id="variables">Variables<a href="#variables" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>Variable store some values</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tester&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;hello </span>$name<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>read -p <span style="color:#e6db74">&#34;Enter you age: &#34;</span> age
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;your age is </span>$age<span style="color:#e6db74">&#34;</span>
</span></span></code></pre></div><ul>
<li>read: It is used for user input, <code>age</code> is variable in which we are storing that user input.</li>
<li>$ is use to access variable content.</li>
</ul>
</li>
</ul>
<p> </p>
<ul>
<li>
<h4 id="arguments">Arguments<a href="#arguments" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>Arguments are values which is provided at runtime</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;File name is: </span>$0<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Hello </span>$1<span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Creating file </span>$2<span style="color:#e6db74">&#34;</span> <span style="color:#f92672">&amp;&amp;</span> touch $2 
</span></span></code></pre></div><p>Execute</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>./script tester myfile2
</span></span></code></pre></div><p>Output</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>File name is: /tmp/script
</span></span><span style="display:flex;"><span>Hello tester
</span></span><span style="display:flex;"><span>Creating file myfile2
</span></span></code></pre></div><ul>
<li>$1,$2,.. $n This is how we access arguments.</li>
<li>$0 is the first argument, which is the name of file.</li>
<li>$# This returns the count of arguments.</li>
<li>$@ This represents all the arguments.</li>
</ul>
<p> </p>
</li>
</ul>
<hr>
<p> </p>
<ul>
<li>
<h4 id="loops">Loops<a href="#loops" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>Execute until a specific condition is met.</p>
<h5 id="example">Example:<a href="#example" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>dir<span style="color:#f92672">=</span>/home/user/scripts/*.sh
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> files in $dir
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    echo $files
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p>This script print all .sh files in that directory.</p>
<h5 id="example-2-script-to-add-multiple-users">Example 2: Script to add multiple users.<a href="#example-2-script-to-add-multiple-users" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h5>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>read -p <span style="color:#e6db74">&#34;Enter the number of users: &#34;</span> user_num
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> <span style="color:#f92672">((</span> i<span style="color:#f92672">=</span>1; i&lt;<span style="color:#f92672">=</span>$user_num; i++ <span style="color:#f92672">))</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    read -p <span style="color:#e6db74">&#34;Enter username: &#34;</span> user
</span></span><span style="display:flex;"><span>    read -s -p <span style="color:#e6db74">&#34;Enter pass: &#34;</span> pass
</span></span><span style="display:flex;"><span>    sudo useradd -m $user
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;</span>$user<span style="color:#e6db74">:</span>$pass<span style="color:#e6db74">&#34;</span> | sudo chpasswd
</span></span><span style="display:flex;"><span>    echo <span style="color:#e6db74">&#34;Done&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cat /etc/passwd | grep $user
</span></span></code></pre></div></li>
</ul>
<p> </p>
<ul>
<li>
<h4 id="if-else-statement">If else statement<a href="#if-else-statement" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<p>Execute something on some condition</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;tester&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">[</span> $name <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;tester&#34;</span> <span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">then</span>
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;yes, tester logged in&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span> 
</span></span><span style="display:flex;"><span>        echo <span style="color:#e6db74">&#34;Invalid user&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">fi</span>
</span></span></code></pre></div><p> </p>
</li>
</ul>
<hr>
<h4 id="example-script">Example script.<a href="#example-script" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h4>
<ol>
<li>
<p>Install  nginx and serve page using script.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Update system</span>
</span></span><span style="display:flex;"><span>sudo apt update
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Install nginx</span>
</span></span><span style="display:flex;"><span>sudo apt install nginx -y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Start &amp; enable nginx service</span>
</span></span><span style="display:flex;"><span>sudo systemctl enable --now nginx
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Serve the page</span>
</span></span><span style="display:flex;"><span>sudo rm /var/www/html/*.html <span style="color:#f92672">&amp;&amp;</span> echo <span style="color:#e6db74">&#34;Hello world&#34;</span> | sudo tee /var/www/html/index.html 
</span></span></code></pre></div></li>
<li>
<p>Backup script</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>src<span style="color:#f92672">=</span>/home/user/devops/script
</span></span><span style="display:flex;"><span>tgt<span style="color:#f92672">=</span>/home/user/backups
</span></span><span style="display:flex;"><span>filename<span style="color:#f92672">=</span><span style="color:#66d9ef">$(</span>date +<span style="color:#e6db74">&#39;%d-%m-%Y&#39;</span><span style="color:#66d9ef">)</span>.tar.gz
</span></span><span style="display:flex;"><span>tar -cvzf $tgt/$filename $src 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>echo <span style="color:#e6db74">&#34;Completed!&#34;</span>
</span></span></code></pre></div><p>You can create crontab for this.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>crontab -e
</span></span></code></pre></div><pre tabindex="0"><code class="language-cron" data-lang="cron">* * * * * /path/to/backup/script
</code></pre></li>
</ol>
<p>That&rsquo;s it.</p>

      </div></div>

  

  
    

  
  
</article>





  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2025 Powered by <a href="https://gohugo.io">Hugo</a></span>
    
      <span>:: <a href="https://github.com/panr/hugo-theme-terminal" target="_blank">Theme</a> made by <a href="https://github.com/panr" target="_blank">panr</a></span>
      </div>
  </div>
</footer>






<script type="text/javascript" src="/bundle.min.js"></script>





  
</div>

</body>
</html>
